"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[67],{5067:(e,n,i)=>{i.r(n),i.d(n,{default:()=>w});var r=i(20908),t=i(30388),a=(i(16280),i(76918),i(26099),i(27495),i(25440),i(20641)),o=i(90033),l=i(50953),c=i(46992),u=i(5499),s=i(99607),d=i(80394),f={class:"shield-page"},m={class:"shield-card"},v={key:0,class:"error"},p={class:"tips"},h="render";const k={__name:"Shield",setup:function(e){var n=(0,c.s9)().t,i=function(e,i){try{var r=n(e);return"string"==typeof r&&r===e?i:r}catch(e){return i}},k=(0,u.lq)(),w=(0,u.rd)(),F=(null===d.SHIELD_CONFIG||void 0===d.SHIELD_CONFIG?void 0:d.SHIELD_CONFIG.turnstileSiteKey)||"",_=null,y=(0,l.KR)(null),b=(0,l.KR)("");function C(e){return E.apply(this,arguments)}function E(){return(E=(0,t.A)((0,r.A)().m(function e(i){var t;return(0,r.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,i){e.n=1;break}return b.value="common.verificationFailed"===n("common.verificationFailed")?"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5":n("common.verificationFailed"),e.a(2);case 1:(0,s.EA)(s.SR),t=k.query.redirect||"/",w.replace(t),e.n=3;break;case 2:e.p=2,e.v,b.value="common.verificationFailed"===n("common.verificationFailed")?"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5":n("common.verificationFailed");case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function L(){return new Promise(function(e,n){if(window.turnstile)e();else{var i=document.createElement("script");i.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",i.onload=function(){return e()},i.onerror=function(){return n(new Error("Failed to load Turnstile script"))},document.head.appendChild(i)}})}return(0,a.sV)((0,t.A)((0,r.A)().m(function e(){var i;return(0,r.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,F){e.n=1;break}return b.value=n("common.turnstileSiteKeyMissing")||"Turnstile siteKey not configured",e.a(2);case 1:return e.n=2,L();case 2:_=window.turnstile.render("#turnstile-container",{sitekey:F,callback:C,theme:"auto",appearance:"always",size:"normal",action:"shield",execution:h,"error-callback":function(e){console&&console.error,b.value="common.verificationFailed"===n("common.verificationFailed")?"\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5":n("common.verificationFailed")},"expired-callback":function(){try{window.turnstile.reset(_)}catch(e){}}}),e.n=4;break;case 3:e.p=3,i=e.v,b.value=(null==i?void 0:i.message)||"Failed to initialize Turnstile";case 4:return e.a(2)}},e,null,[[0,3]])}))),function(e,n){return(0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",m,[(0,a.Lk)("h2",null,(0,o.v_)(i("common.verification","\u9a8c\u8bc1")),1),(0,a.Lk)("p",null,(0,o.v_)(i("common.pleaseCompleteVerification","\u8bf7\u5b8c\u6210\u9a8c\u8bc1\u4ee5\u7ee7\u7eed")),1),b.value?((0,a.uX)(),(0,a.CE)("div",v,(0,o.v_)(b.value),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",{id:"turnstile-container",ref_key:"turnstileEl",ref:y},null,512),(0,a.Lk)("div",p,[(0,a.Lk)("p",null,(0,o.v_)(i("common.shieldTips","\u672c\u7ad9\u5df2\u542f\u7528 Turnstile \u4fdd\u62a4\uff0c\u5982\u4f7f\u7528\u62e6\u622a\u5668\u8bf7\u5141\u8bb8 Cloudflare \u5c0f\u7ec4\u4ef6\u3002")),1)])])])}}};const w=(0,i(66262).A)(k,[["__scopeId","data-v-b9662b5a"]])}}]);